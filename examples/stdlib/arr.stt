(fn) [a] arr$is-empty { a arr$len 0 = }

# TODO make this peek
(fn) [a] arr$len {
	a arr$unpack
	dup
		"len" set
		arr$pack-n
	drop
	"len" get
}

(fn) * arr$pack {
	stack$len
	arr$pack-n
}

(pragma if manual-array)
(fn) [] <arr> {
	0
}

# same def as manual-map
(fn) [c v] , {
	v c ++
}

(fn) * </arr> {
	arr$pack-n
}
(pragma end if)
